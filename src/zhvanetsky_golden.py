"""
Золотой запас примеров в стиле Михаила Жванецкого для обучения Haiku.
Каждый пример содержит тему и образец юмористического ответа с неожиданным поворотом.
"""

GOLDEN_EXAMPLES = {
    "sport": [
        {
            "topic": "футбол",
            "example": "Футбол? У нас тоже команда - только мяч это идеи, а ворота - будущее вашего ребёнка. И никто не промахивается."
        },
        {
            "topic": "бокс",
            "example": "Бокс учит защищаться. Мы учим договариваться. Что сложнее - решайте сами."
        },
        {
            "topic": "плавание",
            "example": "Плавание? Знаю - держаться на воде. У нас учат держаться в жизни. Глубина та же, только без воды."
        },
        {
            "topic": "шахматы",
            "example": "Шахматы развивают мышление? У нас дети играют в жизнь - там фигур больше, а правила меняются на ходу."
        },
        {
            "topic": "теннис",
            "example": "Теннис - это когда мяч летает туда-сюда. Диалог с ребёнком - то же самое, только вместо мяча - аргументы."
        },
        {
            "topic": "йога",
            "example": "Йога учит гибкости тела. Мы - гибкости мышления. Попробуйте принять позу лотоса в споре с подростком."
        },
        {
            "topic": "бег",
            "example": "Бегать полезно. Но от проблем не убежишь. Мы учим останавливаться и решать."
        },
        {
            "topic": "фитнес",
            "example": "Фитнес для тела есть везде. Фитнес для характера - только у нас. Мышцы души тоже нужно качать."
        }
    ],
    
    "weather": [
        {
            "topic": "дождь",
            "example": "Дождь? У нас дети учатся не прятаться от дождя, а танцевать под ним. Метафорически, конечно."
        },
        {
            "topic": "снег",
            "example": "Снег - это когда всё белое и чистое. Как детское мышление до встречи с интернетом. Мы учим фильтровать."
        },
        {
            "topic": "жара",
            "example": "Жарко? В дискуссиях наших детей ещё жарче. Но они умеют не сгорать, а загораться идеями."
        },
        {
            "topic": "холод",
            "example": "От холода спасает тёплая одежда. От холода в отношениях - тёплые слова. Угадайте, чему мы учим?"
        },
        {
            "topic": "туман",
            "example": "Туман мешает видеть дорогу. Подростковый возраст - тот же туман. Мы даём компас."
        },
        {
            "topic": "ветер",
            "example": "Ветер перемен? У детей он дует постоянно. Мы учим быть не флюгером, а парусом."
        },
        {
            "topic": "гроза",
            "example": "Гроза - это электричество в небе. Детские эмоции - то же электричество, только дома. Учим заземляться."
        },
        {
            "topic": "солнце",
            "example": "Солнце светит всем одинаково. Но не все умеют загорать. С талантами детей - та же история."
        }
    ],
    
    "tech": [
        {
            "topic": "ChatGPT",
            "example": "ChatGPT? У нас тоже искусственный интеллект - только наоборот. Превращаем естественную детскую хаотичность в интеллект."
        },
        {
            "topic": "TikTok",
            "example": "TikTok учит танцевать 15 секунд. Мы учим думать всю жизнь. Что сложнее - не спрашивайте."
        },
        {
            "topic": "iPhone",
            "example": "Новый iPhone выходит каждый год. Новая версия вашего ребёнка - каждый день. Мы помогаем с апдейтами."
        },
        {
            "topic": "интернет",
            "example": "Интернет знает всё. Ребёнок тоже думает, что знает всё. Мы учим сомневаться красиво."
        },
        {
            "topic": "компьютерные игры",
            "example": "В играх есть уровни. В жизни тоже. Только кнопки 'сохраниться' нет. Учим проходить с первого раза."
        },
        {
            "topic": "соцсети",
            "example": "Лайки в соцсетях - это здорово. Но самолайк важнее. Преподаём основы внутреннего SMM."
        },
        {
            "topic": "криптовалюта",
            "example": "Криптовалюта - деньги будущего. Soft skills - валюта вечная. Курс не падает."
        },
        {
            "topic": "метавселенная",
            "example": "Метавселенная - это виртуальная реальность. Детское воображение - та же метавселенная, только без очков."
        }
    ],
    
    "food": [
        {
            "topic": "борщ",
            "example": "Борщ - это когда всё смешали и получилось вкусно. Детский коллектив - тот же принцип, только сложнее."
        },
        {
            "topic": "пицца",
            "example": "Пицца объединяет. Общие проекты в нашей школе - тоже. Только пользы больше, а калорий меньше."
        },
        {
            "topic": "кофе",
            "example": "Кофе бодрит утром. Успехи ребёнка бодрят всегда. Учим добывать второе."
        },
        {
            "topic": "сладкое",
            "example": "От сладкого портятся зубы. От сладких речей - характер. Мы учим балансу."
        },
        {
            "topic": "диета",
            "example": "Диета для тела популярна. Диета для ума - нет. Странно, правда? Мы кормим мозг правильно."
        },
        {
            "topic": "фастфуд",
            "example": "Фастфуд - быстро и вредно. Быстрые решения - то же самое. Учим готовить решения как бабушка борщ."
        },
        {
            "topic": "вегетарианство",
            "example": "Вегетарианство - отказ от мяса. У нас дети отказываются от агрессии. Тоже полезно."
        },
        {
            "topic": "доставка еды",
            "example": "Доставка еды экономит время. Мы доставляем знания прямо в голову. Без курьера."
        }
    ],
    
    "transport": [
        {
            "topic": "пробки",
            "example": "В пробках стоите? Отлично! Пока вы стоите, ребёнок движется вперёд. У нас, конечно."
        },
        {
            "topic": "метро",
            "example": "В метро все едут в одном направлении. В жизни у каждого своё. Учим выбирать свою ветку."
        },
        {
            "topic": "самолёт",
            "example": "Самолёт поднимает в небо за час. Мы поднимаем самооценку за курс. Что важнее для полёта по жизни?"
        },
        {
            "topic": "велосипед",
            "example": "На велосипеде упал - встал и поехал. В общении упал - сложнее. Учим вставать красиво."
        },
        {
            "topic": "такси",
            "example": "Такси довезёт куда скажете. Ребёнок поедет куда захочет. Учим хотеть правильного."
        },
        {
            "topic": "электросамокат",
            "example": "Электросамокат - это модно. Электрический характер ребёнка - это сложно. Помогаем с управлением."
        },
        {
            "topic": "корабль",
            "example": "Корабль держится на воде благодаря физике. Ребёнок в социуме - благодаря soft skills. Физика та же."
        },
        {
            "topic": "поезд",
            "example": "Поезд идёт по рельсам. Дети - нет. И слава богу. Учим прокладывать свои пути."
        }
    ],
    
    "general": [
        {
            "topic": "деньги",
            "example": "Деньги - это бумага с портретами. Диплом - тоже. Но умение общаться не нарисуешь. Этому учим мы."
        },
        {
            "topic": "время",
            "example": "Время - деньги? Нет. Время с ребёнком - инвестиция. Мы повышаем процент."
        },
        {
            "topic": "счастье",
            "example": "Счастье не купишь. Но можно вырастить. У нас есть инструкция и удобрения для души."
        },
        {
            "topic": "успех",
            "example": "Успех - это когда повезло? Нет, это когда подготовился. Готовим везунчиков."
        },
        {
            "topic": "работа",
            "example": "На работе нужны hard skills. В жизни - soft skills. Угадайте, что сложнее освоить?"
        },
        {
            "topic": "отпуск",
            "example": "В отпуск едут отдыхать. К нам приходят работать. Над собой. Но детям нравится больше, чем море."
        },
        {
            "topic": "книги",
            "example": "Книги учат жить. Жизнь учит лучше. Мы где-то посередине - учим учиться у жизни."
        },
        {
            "topic": "музыка",
            "example": "Музыка - это гармония звуков. Общение - гармония слов. Второму научить сложнее, но мы умеем."
        },
        {
            "topic": "праздники",
            "example": "Праздники случаются по календарю. Детские победы - каждый день. Если правильно настроить оптику."
        },
        {
            "topic": "сон",
            "example": "Во сне мозг отдыхает. На наших занятиях - работает весело. Парадокс? Нет, методика."
        }
    ]
}

def get_examples_for_category(category: str, count: int = 4) -> list:
    """
    Получить примеры для конкретной категории.
    
    Args:
        category: Название категории
        count: Количество примеров
    
    Returns:
        Список примеров
    """
    if category not in GOLDEN_EXAMPLES:
        # Если категория не найдена, берём из general
        category = "general"
    
    examples = GOLDEN_EXAMPLES[category]
    
    # Если примеров меньше чем запрошено, возвращаем все
    if len(examples) <= count:
        return examples
    
    # Иначе выбираем случайные
    import random
    return random.sample(examples, count)

def get_mixed_examples(main_category: str = None) -> list:
    """
    Получить смешанные примеры: 2 из основной категории + 2 из general.
    
    Args:
        main_category: Основная категория (опционально)
    
    Returns:
        Список из 4 примеров
    """
    import random
    
    examples = []
    
    if main_category and main_category in GOLDEN_EXAMPLES:
        # 2 примера из основной категории
        examples.extend(random.sample(GOLDEN_EXAMPLES[main_category], min(2, len(GOLDEN_EXAMPLES[main_category]))))
    
    # Добавляем примеры из general до 4 штук
    general_count = 4 - len(examples)
    if general_count > 0:
        examples.extend(random.sample(GOLDEN_EXAMPLES["general"], min(general_count, len(GOLDEN_EXAMPLES["general"]))))
    
    return examples

def format_examples_for_prompt(examples: list) -> str:
    """
    Форматировать примеры для промпта Haiku.
    
    Args:
        examples: Список примеров
    
    Returns:
        Отформатированная строка
    """
    formatted = []
    for i, ex in enumerate(examples, 1):
        formatted.append(f"{i}. Тема: {ex['topic']}\n   Ответ: {ex['example']}")
    
    return "\n\n".join(formatted)