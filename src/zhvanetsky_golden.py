"""
Золотой запас примеров в стиле Михаила Жванецкого для обучения Haiku.
Каждый пример содержит тему и образец юмористического ответа с неожиданным поворотом.
"""

GOLDEN_EXAMPLES = {
    "sport": [
        {
            "topic": "футбол",
            "example": "Футбол? У нас тоже команда - только мяч это идеи, а ворота - будущее вашего ребёнка. И никто не промахивается."
        },
        {
            "topic": "бокс",
            "example": "Бокс учит защищаться. Мы учим договариваться. Что сложнее - решайте сами."
        },
        {
            "topic": "плавание",
            "example": "Плавание? Знаю - держаться на воде. У нас учат держаться в жизни. Глубина та же, только без воды."
        },
        {
            "topic": "шахматы",
            "example": "Шахматы развивают мышление? У нас дети играют в жизнь - там фигур больше, а правила меняются на ходу."
        },
        {
            "topic": "теннис",
            "example": "Теннис - это когда мяч летает туда-сюда. Диалог с ребёнком - то же самое, только вместо мяча - аргументы."
        },
        {
            "topic": "йога",
            "example": "Йога учит гибкости тела. Мы - гибкости мышления. Попробуйте принять позу лотоса в споре с подростком."
        },
        {
            "topic": "бег",
            "example": "Бегать полезно. Но от проблем не убежишь. Мы учим останавливаться и решать."
        },
        {
            "topic": "фитнес",
            "example": "Фитнес для тела есть везде. Фитнес для характера - только у нас. Мышцы души тоже нужно качать."
        }
    ],
    
    "weather": [
        {
            "topic": "дождь",
            "example": "Дождь? У нас дети учатся не прятаться от дождя, а танцевать под ним. Метафорически, конечно."
        },
        {
            "topic": "снег",
            "example": "Снег - это когда всё белое и чистое. Как детское мышление до встречи с интернетом. Мы учим фильтровать."
        },
        {
            "topic": "жара",
            "example": "Жарко? В дискуссиях наших детей ещё жарче. Но они умеют не сгорать, а загораться идеями."
        },
        {
            "topic": "холод",
            "example": "От холода спасает тёплая одежда. От холода в отношениях - тёплые слова. Угадайте, чему мы учим?"
        },
        {
            "topic": "туман",
            "example": "Туман мешает видеть дорогу. Подростковый возраст - тот же туман. Мы даём компас."
        },
        {
            "topic": "ветер",
            "example": "Ветер перемен? У детей он дует постоянно. Мы учим быть не флюгером, а парусом."
        },
        {
            "topic": "гроза",
            "example": "Гроза - это электричество в небе. Детские эмоции - то же электричество, только дома. Учим заземляться."
        },
        {
            "topic": "солнце",
            "example": "Солнце светит всем одинаково. Но не все умеют загорать. С талантами детей - та же история."
        }
    ],
    
    "tech": [
        {
            "topic": "ChatGPT",
            "example": "ChatGPT? У нас тоже искусственный интеллект - только наоборот. Превращаем естественную детскую хаотичность в интеллект."
        },
        {
            "topic": "TikTok",
            "example": "TikTok учит танцевать 15 секунд. Мы учим думать всю жизнь. Что сложнее - не спрашивайте."
        },
        {
            "topic": "iPhone",
            "example": "Новый iPhone выходит каждый год. Новая версия вашего ребёнка - каждый день. Мы помогаем с апдейтами."
        },
        {
            "topic": "интернет",
            "example": "Интернет знает всё. Ребёнок тоже думает, что знает всё. Мы учим сомневаться красиво."
        },
        {
            "topic": "компьютерные игры",
            "example": "В играх есть уровни. В жизни тоже. Только кнопки 'сохраниться' нет. Учим проходить с первого раза."
        },
        {
            "topic": "соцсети",
            "example": "Лайки в соцсетях - это здорово. Но самолайк важнее. Преподаём основы внутреннего SMM."
        },
        {
            "topic": "криптовалюта",
            "example": "Криптовалюта - деньги будущего. Soft skills - валюта вечная. Курс не падает."
        },
        {
            "topic": "метавселенная",
            "example": "Метавселенная - это виртуальная реальность. Детское воображение - та же метавселенная, только без очков."
        }
    ],
    
    "food": [
        {
            "topic": "борщ",
            "example": "Борщ - это когда всё смешали и получилось вкусно. Детский коллектив - тот же принцип, только сложнее."
        },
        {
            "topic": "пицца",
            "example": "Пицца объединяет. Общие проекты в нашей школе - тоже. Только пользы больше, а калорий меньше."
        },
        {
            "topic": "кофе",
            "example": "Кофе бодрит утром. Успехи ребёнка бодрят всегда. Учим добывать второе."
        },
        {
            "topic": "сладкое",
            "example": "От сладкого портятся зубы. От сладких речей - характер. Мы учим балансу."
        },
        {
            "topic": "диета",
            "example": "Диета для тела популярна. Диета для ума - нет. Странно, правда? Мы кормим мозг правильно."
        },
        {
            "topic": "фастфуд",
            "example": "Фастфуд - быстро и вредно. Быстрые решения - то же самое. Учим готовить решения как бабушка борщ."
        },
        {
            "topic": "вегетарианство",
            "example": "Вегетарианство - отказ от мяса. У нас дети отказываются от агрессии. Тоже полезно."
        },
        {
            "topic": "доставка еды",
            "example": "Доставка еды экономит время. Мы доставляем знания прямо в голову. Без курьера."
        }
    ],
    
    "transport": [
        {
            "topic": "пробки",
            "example": "В пробках стоите? Отлично! Пока вы стоите, ребёнок движется вперёд. У нас, конечно."
        },
        {
            "topic": "метро",
            "example": "В метро все едут в одном направлении. В жизни у каждого своё. Учим выбирать свою ветку."
        },
        {
            "topic": "самолёт",
            "example": "Самолёт поднимает в небо за час. Мы поднимаем самооценку за курс. Что важнее для полёта по жизни?"
        },
        {
            "topic": "велосипед",
            "example": "На велосипеде упал - встал и поехал. В общении упал - сложнее. Учим вставать красиво."
        },
        {
            "topic": "такси",
            "example": "Такси довезёт куда скажете. Ребёнок поедет куда захочет. Учим хотеть правильного."
        },
        {
            "topic": "электросамокат",
            "example": "Электросамокат - это модно. Электрический характер ребёнка - это сложно. Помогаем с управлением."
        },
        {
            "topic": "корабль",
            "example": "Корабль держится на воде благодаря физике. Ребёнок в социуме - благодаря soft skills. Физика та же."
        },
        {
            "topic": "поезд",
            "example": "Поезд идёт по рельсам. Дети - нет. И слава богу. Учим прокладывать свои пути."
        }
    ],
    
    "general": [
        {
            "topic": "деньги",
            "example": "Деньги - это бумага с портретами. Диплом - тоже. Но умение общаться не нарисуешь. Этому учим мы."
        },
        {
            "topic": "время",
            "example": "Время - деньги? Нет. Время с ребёнком - инвестиция. Мы повышаем процент."
        },
        {
            "topic": "счастье",
            "example": "Счастье не купишь. Но можно вырастить. У нас есть инструкция и удобрения для души."
        },
        {
            "topic": "успех",
            "example": "Успех - это когда повезло? Нет, это когда подготовился. Готовим везунчиков."
        },
        {
            "topic": "работа",
            "example": "На работе нужны hard skills. В жизни - soft skills. Угадайте, что сложнее освоить?"
        },
        {
            "topic": "отпуск",
            "example": "В отпуск едут отдыхать. К нам приходят работать. Над собой. Но детям нравится больше, чем море."
        },
        {
            "topic": "книги",
            "example": "Книги учат жить. Жизнь учит лучше. Мы где-то посередине - учим учиться у жизни."
        },
        {
            "topic": "музыка",
            "example": "Музыка - это гармония звуков. Общение - гармония слов. Второму научить сложнее, но мы умеем."
        },
        {
            "topic": "праздники",
            "example": "Праздники случаются по календарю. Детские победы - каждый день. Если правильно настроить оптику."
        },
        {
            "topic": "сон",
            "example": "Во сне мозг отдыхает. На наших занятиях - работает весело. Парадокс? Нет, методика."
        },
        # === НОВЫЕ ПРИМЕРЫ ДЛЯ БОЛЬШЕГО РАЗНООБРАЗИЯ (MVP) ===
        # Родительские чаты
        {
            "topic": "родительский чат",
            "example": "Родительский чат - это место, где 30 взрослых не могут договориться о подарке учителю. А мы учим детей договариваться с первого раза."
        },
        {
            "topic": "школьный чат",
            "example": "В школьном чате 200 сообщений в час. И ни одного по делу. Учим детей говорить кратко и по существу - родителям потом спасибо скажете."
        },
        {
            "topic": "чат класса",
            "example": "Чат класса - единственное место, где emoji используют чаще, чем слова. Мы учим выражать эмоции словами. Революционно, да?"
        },
        {
            "topic": "переписка родителей",
            "example": "Родители в чате решают задачи за детей быстрее, чем дети их получают. Мы учим детей думать самостоятельно - родителям придётся отдыхать."
        },
        {
            "topic": "сообщения в чате",
            "example": "Одно сообщение от учителя вызывает 50 вопросов от родителей. У нас дети учатся понимать с первого раза - экономия трафика."
        },
        # Дети и гаджеты
        {
            "topic": "планшет",
            "example": "Ребёнок с планшетом тише воды. Но вода в стакане тоже тихая, пока не закипит. Учим управлять кипением."
        },
        {
            "topic": "телефон ребёнка",
            "example": "Первый телефон ребёнка - как первая любовь. Только телефон точно не бросит. Мы учим строить отношения с людьми, а не с экранами."
        },
        {
            "topic": "игры на телефоне",
            "example": "В играх дети проходят 100 уровней за день. В жизни застревают на первом. Помогаем разблокировать реальность."
        },
        {
            "topic": "YouTube",
            "example": "Ребёнок знает 500 блогеров, но не знает соседей. Учим общаться в 3D без лайков и подписок."
        },
        {
            "topic": "TikTok",
            "example": "15 секунд в TikTok - и ребёнок звезда. 15 минут домашки - трагедия века. Учим фокусироваться дольше, чем длится ролик."
        },
        # Современные кружки
        {
            "topic": "робототехника",
            "example": "Робототехника учит собирать роботов. Мы учим разбираться в людях. Второе сложнее - у людей нет инструкции."
        },
        {
            "topic": "программирование для детей",
            "example": "Дети пишут код, который работает. Родители пишут замечания, которые не работают. Учим находить общий язык без багов."
        },
        {
            "topic": "китайский язык",
            "example": "Китайский учат для будущего. Но будущее наступает, когда умеешь договориться на любом языке. Даже на языке подростка."
        },
        {
            "topic": "ментальная арифметика",
            "example": "Ментальная арифметика - считают в уме быстрее калькулятора. А посчитать последствия своих слов? Этому учим мы."
        },
        {
            "topic": "танцы",
            "example": "На танцах учат двигаться под музыку. У нас - двигаться по жизни. Музыка не всегда играет, но танцевать надо."
        },
        # Домашние задания
        {
            "topic": "домашка",
            "example": "Домашка - это когда вся семья вспоминает школьную программу. У нас задания делает ребёнок. Родители просто гордятся."
        },
        {
            "topic": "уроки",
            "example": "Делать уроки с ребёнком - это квест. Найти мотивацию, победить лень, не сойти с ума. Мы даём читы для прохождения."
        },
        {
            "topic": "математика",
            "example": "Современная математика: родители не понимают задачи 3 класса. Зато понимают, что soft skills важнее интегралов."
        },
        {
            "topic": "проект в школе",
            "example": "Школьный проект делает вся семья. Презентует ребёнок. Оценку получает Pinterest мамы. Учим детей творить самостоятельно."
        },
        {
            "topic": "контрольная",
            "example": "Перед контрольной нервничает вся семья. После - тоже. Учим детей управлять стрессом. Родителям тоже пригодится."
        },
        # Детские праздники
        {
            "topic": "день рождения",
            "example": "Детский день рождения - это когда 20 детей разрушают квартиру за час. Мы учим созидать. Дольше и интереснее."
        },
        {
            "topic": "аниматоры",
            "example": "Аниматор держит внимание детей 2 часа за деньги. Мы учим детей держать внимание бесплатно. Экономия на праздниках."
        },
        {
            "topic": "подарки детям",
            "example": "Выбрать подарок ребёнку - это угадать, что будет интересно 5 минут. Мы дарим навыки на всю жизнь. Не надоест."
        },
        {
            "topic": "утренник",
            "example": "На утреннике все дети - снежинки или зайчики. В жизни надо быть личностью. Готовим уникальных."
        },
        {
            "topic": "выпускной",
            "example": "Выпускной в садике отмечают как окончание университета. А навыкам общения где учиться? Правильно, у нас."
        },
        # Выбор школы
        {
            "topic": "выбор школы",
            "example": "Выбирают школу по рейтингу. А где рейтинг счастливых детей? Мы не в рейтингах, мы создаём счастье."
        },
        {
            "topic": "частная школа",
            "example": "Частная школа - это когда платишь за то, что должно быть бесплатным. Мы учим тому, что бесценно."
        },
        {
            "topic": "лицей или гимназия",
            "example": "Лицей, гимназия, школа... Названия разные, проблемы те же. Решение одно - научить ребёнка учиться."
        },
        {
            "topic": "подготовка к школе",
            "example": "К школе готовят: читать, писать, считать. А готовят ли дружить, прощать, мечтать? Мы - да."
        },
        {
            "topic": "репетиторы",
            "example": "Репетитор по каждому предмету - норма. Репетитор по жизни - это мы. Дешевле и эффективнее."
        }
    ]
}

def get_examples_for_category(category: str, count: int = 4) -> list:
    """
    Получить примеры для конкретной категории.
    
    Args:
        category: Название категории
        count: Количество примеров
    
    Returns:
        Список примеров
    """
    if category not in GOLDEN_EXAMPLES:
        # Если категория не найдена, берём из general
        category = "general"
    
    examples = GOLDEN_EXAMPLES[category]
    
    # Если примеров меньше чем запрошено, возвращаем все
    if len(examples) <= count:
        return examples
    
    # Иначе выбираем случайные
    import random
    return random.sample(examples, count)

def get_mixed_examples(main_category: str = None) -> list:
    """
    Получить смешанные примеры: 3 из основной категории + 3 из general.
    
    Args:
        main_category: Основная категория (опционально)
    
    Returns:
        Список из 6 примеров
    """
    import random
    
    examples = []
    
    if main_category and main_category in GOLDEN_EXAMPLES:
        # 3 примера из основной категории (было 2)
        examples.extend(random.sample(GOLDEN_EXAMPLES[main_category], min(3, len(GOLDEN_EXAMPLES[main_category]))))
    
    # Добавляем примеры из general до 6 штук (было 4)
    general_count = 6 - len(examples)
    if general_count > 0:
        examples.extend(random.sample(GOLDEN_EXAMPLES["general"], min(general_count, len(GOLDEN_EXAMPLES["general"]))))
    
    return examples

def format_examples_for_prompt(examples: list) -> str:
    """
    Форматировать примеры для промпта Haiku.
    
    Args:
        examples: Список примеров
    
    Returns:
        Отформатированная строка
    """
    formatted = []
    for i, ex in enumerate(examples, 1):
        formatted.append(f"{i}. Тема: {ex['topic']}\n   Ответ: {ex['example']}")
    
    return "\n\n".join(formatted)