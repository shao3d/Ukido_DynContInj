#!/usr/bin/env python3
"""
–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
"""

import asyncio
import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent / "src"))

from interactive_test import test_pipeline

async def test_history_flow():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–∏–º user_id"""
    
    user_id = "history_test_user"
    
    # –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    questions = [
        "–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø—Ä–æ –∫—É—Ä—Å—ã",
        "–ü—Ä–∏–≤–µ—Ç! –ê —Ü–µ–Ω—ã –∫–∞–∫–∏–µ?",  # –í—Ç–æ—Ä–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ
        "–ê?",  # –£–ª—å—Ç—Ä–∞-–∫—Ä–∞—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å
        "–≠—Ç–æ –¥–æ—Ä–æ–≥–æ...",  # –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Ü–µ–Ω—É
        "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è"
    ]
    
    print("\nüî¨ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –° –°–û–•–†–ê–ù–ï–ù–ò–ï–ú –ò–°–¢–û–†–ò–ò")
    print("=" * 50)
    print(f"User ID: {user_id}")
    print("=" * 50)
    
    for i, question in enumerate(questions, 1):
        print(f"\nüìù –í–æ–ø—Ä–æ—Å {i}/{len(questions)}: {question}")
        print("-" * 40)
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ user_id –¥–ª—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        await test_pipeline(question, user_id, show_details=False)
        
        # –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
        await asyncio.sleep(1)
    
    print("\n‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!")

if __name__ == "__main__":
    asyncio.run(test_history_flow())